from flask_ponywhoosh import *
from pprint import pprint
from example import *
# OUT: PONYWHOOSH_DEBUG ->  True
# OUT: PONYWHOOSH_INDEXES_PATH  ->  ponywhoosh_indexes
# OUT: PONYWHOOSH_MIN_STRING_LEN  ->  1
# OUT: PONYWHOOSH_WRITER_TIMEOUT ->  3
# OUT: PONYWHOOSH_TEMPLATE_PATH ->  /Users/d555/compiteing/flask-ponywhoosh/flask_ponywhoosh/templates
# OUT: PONYWHOOSH_URL_ROUTE ->  /ponywhoosh/
# OUT: <Schema: ['name', 'number']>
# OUT: <Schema: ['major', 'number']>
# OUT: <Schema: ['credits', 'lab_hours', 'lect_hours', 'name', 'name+semester', 'semester']>
# OUT: <Schema: ['gpa', 'id', 'name', 'tel']>
res = search(Course, "Algebra")
# OUT: opt:
# OUT: {}
pprint(res)
# OUT: {'cant_results': 1,
# OUT:  'facet_names': [],
# OUT:  'matched_terms': {'name': ['algebra']},
# OUT:  'results': [{'docnum': 3L,
# OUT:               'pk': u"(u'Linear Algebra', 1)",
# OUT:               'rank': 0,
# OUT:               'score': 2.09861228866811}],
# OUT:  'runtime': 0.0031919479370117188}
res = full_search(pw, "a", add_wildcards=True)
# OUT: SEARCHING ON MODELS ->  [<class 'example.Department'>, <class 'example.Course'>, <class 'example.Group'>, <class 'example.Student'>]
# OUT: opt:
# OUT: {'add_wildcards': True}
# OUT: Traceback (most recent call last):
# OUT:   File "<input>", line 1, in <module>
# OUT:   File "/Users/d555/compiteing/flask-ponywhoosh/flask_ponywhoosh/utils.py", line 47, in full_search
# OUT:     return pw.search(*arg, **kw)
# OUT:   File "<auto generated wrapper of search() function>", line 2, in search
# OUT:   File "/Users/d555/compiteing/flask-ponywhoosh/venv/lib/python2.7/site-packages/pony/orm/core.py", line 347, in new_func
# OUT:     try: return func(*args, **kwargs)
# OUT:   File "/Users/d555/compiteing/flask-ponywhoosh/flask_ponywhoosh/ponywhoosh.py", line 308, in search
# OUT:     res = index.search(*arg, **kw)
# OUT:   File "<auto generated wrapper of search() function>", line 2, in search
# OUT:   File "/Users/d555/compiteing/flask-ponywhoosh/venv/lib/python2.7/site-packages/pony/orm/core.py", line 347, in new_func
# OUT:     try: return func(*args, **kwargs)
# OUT:   File "/Users/d555/compiteing/flask-ponywhoosh/flask_ponywhoosh/ponywhooshindex.py", line 229, in search
# OUT:     'docnum': r.docnum
# OUT:   File "/Users/d555/compiteing/flask-ponywhoosh/venv/lib/python2.7/site-packages/whoosh/searching.py", line 1518, in __getitem__
# OUT:     raise KeyError(fieldname)
# OUT: KeyError: u'number'
