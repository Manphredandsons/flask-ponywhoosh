<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Welcome to Flask-PonyWhoosh’s documentation! &mdash; Flask-PonyWhoosh 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Flask-PonyWhoosh 0.1.1 documentation" href="#" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-flask-ponywhoosh-s-documentation">
<h1>Welcome to Flask-PonyWhoosh&#8217;s documentation!<a class="headerlink" href="#welcome-to-flask-ponywhoosh-s-documentation" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://pypi.python.org/pypi/Flask-PonyWhoosh"><img alt="PyPI Package latest release" src="http://img.shields.io/pypi/v/Flask-PonyWhoosh.png?style=flat" /></a> <a class="reference external" href="https://pypi.python.org/pypi/Flask-PonyWhoosh"><img alt="PyPI Package monthly downloads" src="http://img.shields.io/pypi/dm/Flask-PonyWhoosh.png?style=flat" /></a> <a class="reference external" href="https://travis-ci.org/piperod/Flask-PonyWhoosh"><img alt="Test" src="https://travis-ci.org/piperod/Flask-PonyWhoosh.svg?branch=master" /></a></p>
<p>This package integrate the amazing power of <code class="docutils literal"><span class="pre">Whoosh</span></code> with <code class="docutils literal"><span class="pre">Pony</span> <span class="pre">ORM</span></code>
inside <code class="docutils literal"><span class="pre">Flask</span></code>. Source code and issue tracking at
<a class="reference external" href="http://github.com/piperod/Flask-PonyWhoosh">http://github.com/piperod/Flask-PonyWhoosh</a>.</p>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre>pip install flask-ponywhoosh
</pre></div>
</div>
<p>or</p>
<div class="code bash highlight-python"><div class="highlight"><pre>git clone https://github.com/piperod/Flask-PonyWhoosh.git
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>Import the library where you define your Entities.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">flask_ponywhoosh</span> <span class="kn">import</span> <span class="n">Whoosh</span>
<span class="n">wh</span> <span class="o">=</span> <span class="n">Whoosh</span><span class="p">()</span>
</pre></div>
</div>
<p>And for each entity wrap it up with the decorator
<code class="docutils literal"><span class="pre">&#64;wh.register_model(*args,**kw)</span></code>. like the following example:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="nd">@wh.register_model</span><span class="p">(</span><span class="s">&#39;name&#39;</span><span class="p">,</span><span class="s">&#39;age&#39;</span><span class="p">,</span> <span class="n">sortable</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>  <span class="n">stored</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Entity</span><span class="p">):</span>
    <span class="n">_table_</span> <span class="o">=</span> <span class="s">&#39;User&#39;</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">PrimaryKey</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">auto</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Required</span><span class="p">(</span><span class="nb">unicode</span><span class="p">)</span>
    <span class="n">tipo</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">(</span><span class="nb">unicode</span><span class="p">)</span>
    <span class="n">age</span> <span class="o">=</span> <span class="n">Optional</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="s">&quot;Entry&quot;</span><span class="p">)</span>
    <span class="n">attributes</span> <span class="o">=</span> <span class="n">Set</span><span class="p">(</span><span class="s">&quot;Attributes&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>As you could see in the previous example, you should declare as strings these fields where you want whoosh to store the searcheables (<code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">age</span></code>, etc.). All the parameters from whoosh are available, You just have to listed separating them with commas: sortable, stored, scored, etc. Refer to whoosh documentation for
further explanations on the application of these parameters.</p>
</div>
<div class="section" id="what-s-new-0-1-6">
<h2>What&#8217;s new? 0.1.6<a class="headerlink" href="#what-s-new-0-1-6" title="Permalink to this headline">¶</a></h2>
<p>We have been working hard to improve the searching html. In this version a beautiful template has been developed with the help of our new contributor Alegomez.</p>
<p>We hope you like it.</p>
<p>For other updates, see <code class="docutils literal"><span class="pre">CHANGELOG.rst</span></code>.</p>
</div>
<div class="section" id="flask-settings">
<h2>Flask Settings<a class="headerlink" href="#flask-settings" title="Permalink to this headline">¶</a></h2>
<p>From a flask configuration, you can add the following options.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;WHOOSHEE_DIR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;whooshes&#39;</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;PONYWHOOSH_DEBUG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;WHOSHEE_MIN_STRING_LEN&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;WHOOSHEE_WRITER_TIMEOUT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">&#39;WHOOSHEE_URL&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;/ponywhoosh&#39;</span>
</pre></div>
</div>
<p>This configurations set up the default folder for savind the whoshees, if you want to activate debug, the minimun lenght of the string in the query, the time out (stop searching if is taking so much) and the route where you might charge the default template for searching available from version 0.1.5.</p>
</div>
<div class="section" id="searching">
<h2>Searching<a class="headerlink" href="#searching" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">PonyModel</span><span class="o">.</span><span class="n">_wh_</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>There are several options to perform a search with <code class="docutils literal"><span class="pre">flask_ponywhoosh</span></code>. For instance, to execute a  simple search, choose the entity where you want to perform the search and then  try
something like the following code over a view function, or even from the shell,</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">User</span><span class="o">.</span><span class="n">_wh_</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">&quot;felipe&quot;</span><span class="p">)</span>
<span class="go">{&#39;cant_results&#39;: 2,</span>
<span class="go"> &#39;facet_names&#39;: [],</span>
<span class="go"> &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;felipe&#39;]},</span>
<span class="go"> &#39;results&#39;: [{&#39;docnum&#39;: 4L,</span>
<span class="go">              &#39;rank&#39;: 0,</span>
<span class="go">              &#39;pk&#39;: 5,</span>
<span class="go">              &#39;score&#39;: 2.540445040947149},</span>
<span class="go">             {&#39;docnum&#39;: 11L,</span>
<span class="go">              &#39;rank&#39;: 1,</span>
<span class="go">              &#39;pk&#39;: 12,</span>
<span class="go">              &#39;score&#39;: 2.540445040947149}],</span>
<span class="go"> &#39;runtime&#39;: 0.001981973648071289}</span>
</pre></div>
</div>
<p>If you would prefer, you may use the function <code class="docutils literal"><span class="pre">search()</span></code>,  which will run the same function but is quite more handy when writing</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flask_ponywhoosh</span> <span class="kn">import</span> <span class="n">search</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search</span><span class="p">(</span><span class="n">User</span><span class="p">,</span><span class="s">&quot;felipe&quot;</span><span class="p">)</span>
<span class="go">{&#39;cant_results&#39;: 2,</span>
<span class="go"> &#39;facet_names&#39;: [],</span>
<span class="go"> &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;felipe&#39;]},</span>
<span class="go"> &#39;results&#39;: [{&#39;docnum&#39;: 4L,</span>
<span class="go">              &#39;rank&#39;: 0,</span>
<span class="go">              &#39;pk&#39; : 5,</span>
<span class="go">              &#39;score&#39;: 2.540445040947149},</span>
<span class="go">             {&#39;docnum&#39;: 11L,</span>
<span class="go">              &#39;rank&#39;: 1,</span>
<span class="go">              &#39;pk&#39; : 12,</span>
<span class="go">              &#39;score&#39;: 2.540445040947149}],</span>
<span class="go"> &#39;runtime&#39;: 0.001981973648071289}</span>
</pre></div>
</div>
<p>The function <code class="docutils literal"><span class="pre">search()</span></code> takes up to three arguments.
1. A ponymodel, the databse entity where you want to perform the search.
2. The <code class="docutils literal"><span class="pre">search_string</span></code>, what  you are looking for; and,
3. The arguments, some additional options for more refined searching.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">search</span><span class="p">(</span><span class="n">PonyModel</span><span class="p">,</span> <span class="s">&quot;query&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</pre></div>
</div>
<p>For example, if  you want  the results to be sorted by some specific searcheable field,
you have to indicate so, by adding the argument <code class="docutils literal"><span class="pre">sortedby=&quot;field&quot;</span></code>.</p>
<p>In this case the search results object would show as a score the value of the item you choose for sorting. Please note that in order for
one field to be sortable, you must indicate it when you are registering
the model. (Refer to the <em>Usage</em> section above)</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flask_ponywhoosh</span> <span class="kn">import</span> <span class="n">search</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">search</span><span class="p">(</span><span class="n">User</span><span class="p">,</span><span class="s">&quot;harol&quot;</span><span class="p">,</span> <span class="n">sortedby</span><span class="o">=</span><span class="s">&quot;age&quot;</span><span class="p">)</span>
<span class="go">{&#39;cant_results&#39;: 2,</span>
<span class="go"> &#39;facet_names&#39;: [],</span>
<span class="go"> &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;felipe&#39;]},</span>
<span class="go"> &#39;results&#39;: [{&#39;docnum&#39;: 4L,</span>
<span class="go">              &#39;rank&#39;: 0,</span>
<span class="go">              &#39;pk&#39; : 5,,</span>
<span class="go">              &#39;score&#39;: &#39;19&#39;},</span>
<span class="go">             {&#39;docnum&#39;: 11L,</span>
<span class="go">              &#39;rank&#39;: 1,</span>
<span class="go">              &#39;pk&#39; : 12,,</span>
<span class="go">              &#39;score&#39;: &#39;19&#39;}],</span>
<span class="go"> &#39;runtime&#39;: 0.0012810230255126953}</span>
</pre></div>
</div>
<p>In synthesis, the options available are: <code class="docutils literal"><span class="pre">sortedby</span></code>, <code class="docutils literal"><span class="pre">scored</span></code>, <code class="docutils literal"><span class="pre">limit</span></code>, <code class="docutils literal"><span class="pre">optimize</span></code>, <code class="docutils literal"><span class="pre">reverse</span></code>. Which are widely described in the whoosh documentation.</p>
<div class="section" id="searching-by-field">
<h3>Searching by field:<a class="headerlink" href="#searching-by-field" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">search</span><span class="p">(</span><span class="n">PonyModel</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="s">&quot;field_name&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>By default the function <code class="docutils literal"><span class="pre">search()</span></code> performs a multifield parser query, i.e.  you will be searching in all the fields you have declared when you registered the model. However, sometimes you would like to perform searching in just one or some of all the fields.
For these reasons we implemented the following extra options: The first one is refered as <code class="docutils literal"><span class="pre">field</span></code> all you have to do is indicate in which field you want to search. The output would be a results object containing only the information found in that field. And <code class="docutils literal"><span class="pre">fields</span></code> where you should write a list with all the fields you want to search.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">search</span><span class="p">(</span><span class="n">User</span><span class="p">,</span><span class="s">&quot;harol&quot;</span><span class="p">,</span><span class="n">field</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">)</span>
<span class="go">     {&#39;cant_results&#39;: 4,</span>
<span class="go">     &#39;facet_names&#39;: [],</span>
<span class="go">     &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;harol&#39;]},</span>
<span class="go">     &#39;results&#39;: [{&#39;docnum&#39;: 1L,</span>
<span class="go">                  &#39;pk&#39;: u&#39;7&#39;,</span>
<span class="go">                  &#39;rank&#39;: 0,</span>
<span class="go">                  &#39;score&#39;: 2.0296194171811583},</span>
<span class="go">                 {&#39;docnum&#39;: 5L,</span>
<span class="go">                  &#39;pk&#39;: u&#39;6&#39;,</span>
<span class="go">                  &#39;rank&#39;: 1,</span>
<span class="go">                  &#39;score&#39;: 2.0296194171811583},</span>
<span class="go">                 {&#39;docnum&#39;: 12L,</span>
<span class="go">                  &#39;pk&#39;: u&#39;13&#39;,</span>
<span class="go">                  &#39;rank&#39;: 2,</span>
<span class="go">                  &#39;score&#39;: 2.0296194171811583},</span>
<span class="go">                 {&#39;docnum&#39;: 13L,</span>
<span class="go">                  &#39;pk&#39;: u&#39;14&#39;,</span>
<span class="go">                  &#39;rank&#39;: 3,</span>
<span class="go">                  &#39;score&#39;: 2.0296194171811583}],</span>
<span class="go">     &#39;runtime&#39;: 0.005359172821044922}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">search</span><span class="p">(</span><span class="n">Attribute</span><span class="p">,</span><span class="s">&quot;tejo&quot;</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s">&quot;sport&quot;</span><span class="p">,</span><span class="s">&quot;name&quot;</span><span class="p">])</span>
<span class="go">    {&#39;cant_results&#39;: 4,</span>
<span class="go">     &#39;facet_names&#39;: [],</span>
<span class="go">     &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;tejo&#39;], &#39;sport&#39;: [&#39;tejo&#39;]},</span>
<span class="go">     &#39;results&#39;: [{&#39;docnum&#39;: 1L,</span>
<span class="go">                  &#39;pk&#39;: u&#39;7&#39;,</span>
<span class="go">                  &#39;rank&#39;: 0,</span>
<span class="go">                  &#39;score&#39;: 5.500610730717037},</span>
<span class="go">                 {&#39;docnum&#39;: 6L,</span>
<span class="go">                  &#39;pk&#39;: u&#39;1&#39;,</span>
<span class="go">                  &#39;rank&#39;: 1,</span>
<span class="go">                  &#39;score&#39;: 5.500610730717037}],</span>
<span class="go">     &#39;runtime&#39;: 0.006212949752807617}</span>
</pre></div>
</div>
</div>
<div class="section" id="the-arguments-add-wildcards-and-something">
<h3>The arguments <code class="docutils literal"><span class="pre">add_wildcards</span></code> and <code class="docutils literal"><span class="pre">something</span></code><a class="headerlink" href="#the-arguments-add-wildcards-and-something" title="Permalink to this headline">¶</a></h3>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">search</span><span class="p">(</span><span class="n">PonyModel</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">add_wildcards</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Whoosh  sets a wildcard <code class="docutils literal"><span class="pre">*</span></code>,``?``,``!`` by default to perform search for inexact terms, however sometimes  is desirable to search by exact terms instead. For this reason we added two more options: <code class="docutils literal"><span class="pre">add_wildcards</span></code> and <code class="docutils literal"><span class="pre">something</span></code>.</p>
<p>The option <em>add_wildcards</em> (by default False)  is a boolean argument that tells the searcher whether it should or not include wild cards. For example, if you want to search &#8220;harol&#8221; when <code class="docutils literal"><span class="pre">add_wildcards=False</span></code>, and you search by &#8220;har&#8221; the results would be 0. If <code class="docutils literal"><span class="pre">add_wildcards=True</span></code> , then &#8220;har&#8221; would be fair enough to get the result &#8220;harol&#8221;  because searching was performed  using wild cards.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">search</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="s">&quot;har&quot;</span><span class="p">,</span> <span class="n">add_wildcards</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="go">  {&#39;cant_results&#39;: 0,</span>
<span class="go">   &#39;facet_names&#39;: [],</span>
<span class="go">   &#39;matched_terms&#39;: {},</span>
<span class="go">   &#39;results&#39;: [],</span>
<span class="go">   &#39;runtime&#39;: 0.0003230571746826172</span>
<span class="go">   }</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">search</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="s">&quot;har&quot;</span><span class="p">,</span> <span class="n">add_wildcards</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">  {&#39;cant_results&#39;: 4,</span>
<span class="go">   &#39;facet_names&#39;: [],</span>
<span class="go">   &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;harol&#39;]},</span>
<span class="go">   &#39;results&#39;: [{&#39;docnum&#39;: 1L,</span>
<span class="go">                &#39;pk&#39;: u&#39;7&#39;,</span>
<span class="go">                &#39;rank&#39;: 0,</span>
<span class="go">                &#39;score&#39;: 2.0296194171811583},</span>
<span class="go">               {&#39;docnum&#39;: 5L,</span>
<span class="go">                &#39;pk&#39;: u&#39;6&#39;,</span>
<span class="go">                &#39;rank&#39;: 1,</span>
<span class="go">                &#39;score&#39;: 2.0296194171811583},</span>
<span class="go">               {&#39;docnum&#39;: 12L,</span>
<span class="go">                &#39;pk&#39;: u&#39;13&#39;,</span>
<span class="go">                &#39;rank&#39;: 2,</span>
<span class="go">                &#39;score&#39;: 2.0296194171811583},</span>
<span class="go">               {&#39;docnum&#39;: 13L,</span>
<span class="go">                &#39;pk&#39;: u&#39;14&#39;,</span>
<span class="go">                &#39;rank&#39;: 3,</span>
<span class="go">                &#39;score&#39;: 2.0296194171811583}],</span>
<span class="go">   &#39;runtime&#39;: 0.014926910400390625}</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">something=True</span></code> option, would run first a search with
<code class="docutils literal"><span class="pre">add_wildcards=False</span></code> value, but in case results are empty it would automatically run a search adding wildcards to the result.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">search</span><span class="p">(</span><span class="n">Attribute</span><span class="p">,</span> <span class="s">&quot;tejo&quot;</span><span class="p">,</span> <span class="n">something</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="go">  {&#39;cant_results&#39;: 4,</span>
<span class="go">   &#39;facet_names&#39;: [],</span>
<span class="go">   &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;tejo&#39;], &#39;sport&#39;: [&#39;tejo&#39;]},</span>
<span class="go">   &#39;results&#39;: [{&#39;docnum&#39;: 1L,</span>
<span class="go">                &#39;pk&#39;: u&#39;7&#39;,</span>
<span class="go">                &#39;rank&#39;: 0,</span>
<span class="go">                &#39;score&#39;: 5.500610730717037},</span>
<span class="go">               {&#39;docnum&#39;: 6L,</span>
<span class="go">                &#39;pk&#39;: u&#39;1&#39;,</span>
<span class="go">                &#39;rank&#39;: 1,</span>
<span class="go">                &#39;score&#39;: 5.500610730717037}],</span>
<span class="go">   &#39;runtime&#39;: 0.0036530494689941406}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-results-dictionary">
<h2>The results dictionary<a class="headerlink" href="#the-results-dictionary" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">search()</span></code> function returns a dictionary with selected information.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">cant_results</span></code>: is the total number of documents collected by the searcher.</li>
<li><code class="docutils literal"><span class="pre">facet_names</span></code>: is useful with the option <code class="docutils literal"><span class="pre">groupedby</span></code>, because it returns the item used to group the results.</li>
<li><code class="docutils literal"><span class="pre">matched_terms</span></code>: is a dictionary that saves the searcheable field and the match given by the query.</li>
<li><code class="docutils literal"><span class="pre">runtime</span></code>: how much time the searcher took to find it.</li>
<li><code class="docutils literal"><span class="pre">results</span></code>: is  a dictionary&#8217;s list for the individual results. i.e. a dictionary for every single result, containing:<ul>
<li>&#8216;rank&#8217;: the position of the result,</li>
<li>&#8216;result&#8217;: indicating the primary key and the correspond value of the item,</li>
<li>&#8216;score&#8217;: the score for the item in the search, and</li>
<li>&#8216;pk&#8217;: the primary key</li>
</ul>
</li>
</ul>
<p>If you want the items shown as a list rather than a dictionary. You can use the option use_dict: this option by default is set True. However if you choose false, results will look something like (&#8216;field&#8217;, &#8216;result&#8217;)</p>
</div>
<div class="section" id="full-search-function">
<h2>Full Search Function<a class="headerlink" href="#full-search-function" title="Permalink to this headline">¶</a></h2>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">full_search</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<p>This function allows you to search in every model instead of searching in one by one. <code class="docutils literal"><span class="pre">full_search</span></code> takes three arguments: <code class="docutils literal"><span class="pre">wh</span></code> is by default the whoosheers where the indexes of  models from the database are stored. <code class="docutils literal"><span class="pre">arg</span></code> is where you type your query, and the last arguments  are the options just as were described before,  with the new feature for <code class="docutils literal"><span class="pre">models</span></code> (this is explained later in this section).</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flask_ponywhoosh</span> <span class="kn">import</span> <span class="n">full_search</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">full_search</span><span class="p">(</span><span class="n">wh</span><span class="p">,</span><span class="s">&quot;ch&quot;</span><span class="p">)</span>
<span class="go">{&#39;cant_results&#39;: 6,</span>
<span class="go"> &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;chuck&#39;], &#39;sport&#39;: [&#39;chulo&#39;, &#39;lucha&#39;]},</span>
<span class="go"> &#39;results&#39;: {&#39;Attribute&#39;: {&#39;items&#39;: [{&#39;docnum&#39;: 0L,</span>
<span class="go">                                      &#39;pk&#39;: u&#39;11&#39;,</span>
<span class="go">                                      &#39;rank&#39;: 0,</span>
<span class="go">                                      &#39;score&#39;: 2.1365658814678095},</span>
<span class="go">                                     {&#39;docnum&#39;: 2L,</span>
<span class="go">                                      &#39;pk&#39;: u&#39;8&#39;,</span>
<span class="go">                                      &#39;rank&#39;: 1,</span>
<span class="go">                                      &#39;score&#39;: 2.1365658814678095},</span>
<span class="go">                                     {&#39;docnum&#39;: 7L,</span>
<span class="go">                                      &#39;pk&#39;: u&#39;2&#39;,</span>
<span class="go">                                      &#39;rank&#39;: 2,</span>
<span class="go">                                      &#39;score&#39;: 2.1365658814678095},</span>
<span class="go">                                     {&#39;docnum&#39;: 10L,</span>
<span class="go">                                      &#39;pk&#39;: u&#39;5&#39;,</span>
<span class="go">                                      &#39;rank&#39;: 3,</span>
<span class="go">                                      &#39;score&#39;: 2.1365658814678095}],</span>
<span class="go">                           &#39;matched_terms&#39;: {&#39;sport&#39;: [&#39;chulo&#39;, &#39;lucha&#39;]}},</span>
<span class="go">             &#39;User&#39;: {&#39;items&#39;: [{&#39;docnum&#39;: 2L,</span>
<span class="go">                                 &#39;pk&#39;: u&#39;8&#39;,</span>
<span class="go">                                 &#39;rank&#39;: 0,</span>
<span class="go">                                 &#39;score&#39;: 2.540445040947149},</span>
<span class="go">                                {&#39;docnum&#39;: 6L,</span>
<span class="go">                                 &#39;pk&#39;: u&#39;1&#39;,</span>
<span class="go">                                 &#39;rank&#39;: 1,</span>
<span class="go">                                 &#39;score&#39;: 2.540445040947149}],</span>
<span class="go">                      &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;chuck&#39;]}}},</span>
<span class="go"> &#39;runtime&#39;: 0.022469043731689453}</span>
</pre></div>
</div>
<p>The results object for this function is a dictionary containing &#8216;runtime&#8217;: The sum of the runtime for the search in every field. &#8216;matched_terms&#8217;: another dictionary that stores the field where the query matched and a list with the results obtained. &#8216;results&#8217;: A dictionary with the location of every result listed by the field.</p>
<p>If you would rather prefer, you can indicate specifically in which models are you interested on searching, by indicating in the arguments of the function <em>full_search(wh,&#8221;search_string&#8221;, models=[list with the models])</em>. For example:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flask_ponywhoosh</span> <span class="kn">import</span> <span class="n">full_search</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">full_search</span><span class="p">(</span><span class="n">wh</span><span class="p">,</span><span class="s">&quot;ch&quot;</span><span class="p">,</span><span class="n">models</span><span class="o">=</span><span class="p">[</span><span class="n">User</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="the-method-ponymodel-wh">
<h2>The method <code class="docutils literal"><span class="pre">PonyModel._wh_.</span></code><a class="headerlink" href="#the-method-ponymodel-wh" title="Permalink to this headline">¶</a></h2>
<p>There are some special features avalaible for models from the database:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">add_field</span></code>: This function is to add a desired field in the index.</li>
<li><code class="docutils literal"><span class="pre">charge_documents</span></code>: This function let you charge an index from an  existing database.</li>
<li><code class="docutils literal"><span class="pre">delete_documents</span></code>: This function deletes all the documents stored in certain whoosh index.</li>
<li><code class="docutils literal"><span class="pre">delete_field</span></code>: This function works in case that you want to erase a determined field from a schema.</li>
<li><code class="docutils literal"><span class="pre">update_documents</span></code>: This function deletes all the documents and recharges them again.</li>
<li><code class="docutils literal"><span class="pre">counts</span></code>: This function counts all the documents existing in an indexes.</li>
</ul>
</div>
<div class="section" id="bonus-ponywhoosh">
<h2>Bonus:/ponywhoosh !<a class="headerlink" href="#bonus-ponywhoosh" title="Permalink to this headline">¶</a></h2>
<p>We  aknowledged  that  we could do better in how the results were shown, for this reason we thought that it would be nice and useful to get ready for you a fully interactive and visual interface where you can perform the searches for your own website. So,  right now is by  default available at the route &#8216;&lt;your_url&gt;/ponywhoosh&#8217;. This route  would get you to  this html template:</p>
<p><a class="reference external" href="https://travis-ci.org/piperod/Flask-PonyWhoosh"><img alt="Pony" src="https://github.com/compiteing/flask-ponywhoosh/blob/master/doc/_static/searchform.png?raw=true" /></a></p>
<p>These form was made thinking in what is more important (query, fields, add wildcards or something, and models). Then if you submit the search, it would show you the results in a parametrized way, deppending on the name of your tables and whether they are searcheables or not. For instance, the example app we provided in here would look like this after you perform some  search:</p>
<p><a class="reference external" href="https://travis-ci.org/piperod/Flask-PonyWhoosh"><img alt="Results" src="https://github.com/compiteing/flask-ponywhoosh/blob/master/doc/_static/results.png?raw=true" /></a></p>
<p>To run this template, you only have to add to your own route the extension /ponywhoosh  and it would redirect you to the personalized view for your own searches. It is possible to change this &#8216;/ponywhoosh&#8217; route, take a look in the Flask settings section.</p>
<p>So far is possible to limitate the search to those fields and models where you want to search and even for those that you want to avoid. As well we include check boxes for add_wildcard and something functions. If there are not results to show the table won&#8217;t be created.</p>
<p>This is how it looks with the new changes.</p>
<p><a href="#id21"><span class="problematic" id="id22">|Form|</span></a></p>
<p>Enjoy it!</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Currently we have implemented some basic tests, primary over the <code class="docutils literal"><span class="pre">search()</span></code> and <code class="docutils literal"><span class="pre">full_search()</span></code> functions. You can find them in the file &#8216;test.py&#8217;.</p>
<p>In the terminal you have to write the following commands to run the tests:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>python -m unittest test
</pre></div>
</div>
<p>This option  runs all the test and display <code class="docutils literal"><span class="pre">OK</span></code>, if all of them were satisfied, the time taken to run all of them and how many were there .</p>
<div class="code bash highlight-python"><div class="highlight"><pre>python -m unittest -v test
</pre></div>
</div>
<p>This option displays every test.</p>
</div>
<div class="section" id="app-full-example">
<h2>App Full Example<a class="headerlink" href="#app-full-example" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">app.py</span></code> for running the flask app.</li>
</ul>
<div class="section" id="running-the-app">
<h3>Running the App<a class="headerlink" href="#running-the-app" title="Permalink to this headline">¶</a></h3>
<div class="code bash highlight-python"><div class="highlight"><pre>pip install virtualenv
virtualenv --no-site-packages venv
source venv/bin/activate
pip install -r requirements.txt
python app.py runserver
</pre></div>
</div>
<p>After that, you could visit the following urls.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">http://localhost:5000/fixtures</span></code> to create entries for database
examples.</li>
<li><code class="docutils literal"><span class="pre">http://localhost:5000/update</span></code> to perform an update in an entity
with <code class="docutils literal"><span class="pre">id=1</span></code>.</li>
<li><code class="docutils literal"><span class="pre">http://localhost:5000/</span></code> to see the entities from database.</li>
<li><code class="docutils literal"><span class="pre">http://localhost:500/ponywhoosh</span></code> to load the visual  interface.</li>
</ul>
</div>
<div class="section" id="running-the-app-example">
<h3>Running the app example<a class="headerlink" href="#running-the-app-example" title="Permalink to this headline">¶</a></h3>
<p>Start a session of a shell.</p>
<div class="code bash highlight-python"><div class="highlight"><pre>python app.py shell
</pre></div>
</div>
<p>Try something like the following sentences:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">app</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">flask_ponywhoosh</span> <span class="kn">import</span> <span class="n">full_search</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">full_search</span><span class="p">(</span><span class="n">wh</span><span class="p">,</span><span class="s">&quot;ch&quot;</span><span class="p">)</span>
<span class="go">{ &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;chuck&#39;],</span>
<span class="go">                    &#39;deporte&#39;: [&#39;chulo&#39;, &#39;lucha&#39;]},</span>
<span class="go">  &#39;runtime&#39;: 0.0033812522888183594</span>
<span class="go">  &#39;results&#39;: {&#39;User&#39;: {&#39;items&#39;: [User[15], User[8],</span>
<span class="go">                User[1]],</span>
<span class="go">  &#39;matched_terms&#39;: {&#39;name&#39;: [&#39;chuck&#39;]}},</span>
<span class="go">  &#39;Attributes&#39;: {&#39;items&#39;: [Attributes[17],</span>
<span class="go">                Attributes[14],</span>
<span class="go">                Attributes[11], Attributes[8],</span>
<span class="go">                Attributes[5], Attributes[2]],</span>
<span class="go"> &#39;matched_terms&#39;: {&#39;deporte&#39;: [&#39;chulo&#39;, &#39;lucha&#39;]}}</span>
<span class="go">             }}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="module-flask_ponywhoosh">
<span id="api"></span><h2>API<a class="headerlink" href="#module-flask_ponywhoosh" title="Permalink to this headline">¶</a></h2>
<div class="section" id="flask-ponywhoosh-extension">
<h3>flask_ponywhoosh extension<a class="headerlink" href="#flask-ponywhoosh-extension" title="Permalink to this headline">¶</a></h3>
<p>Adds capabilities to perform full-text search over your modules of Pony ORM
for flask applications. Enjoy it!</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">copyright:</th><td class="field-body"><ol class="first loweralpha simple" start="3">
<li>2015 by Jonathan S. Prieto &amp; Ivan Felipe Rodriguez.</li>
</ol>
</td>
</tr>
<tr class="field-even field"><th class="field-name">license:</th><td class="field-body"><p class="first last">BSD (see LICENSE.md)</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Attributes:</dt>
<dd>basedir (TYPE): Description</dd>
</dl>
<dl class="class">
<dt id="flask_ponywhoosh.IndexView">
<em class="property">class </em><code class="descclassname">flask_ponywhoosh.</code><code class="descname">IndexView</code><span class="sig-paren">(</span><em>wh</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.IndexView" title="Permalink to this definition">¶</a></dt>
<dd><p>This is all the setting for the template index.html in the templates folder.</p>
<p>methods (list): POST and GET 
wh (whoosheers): The whoosheers is the object where all the whoosheer are saved.</p>
<dl class="method">
<dt id="flask_ponywhoosh.IndexView.dispatch_request">
<code class="descname">dispatch_request</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.IndexView.dispatch_request" title="Permalink to this definition">¶</a></dt>
<dd><p>This form is plugeable. That means that all what you need to do is to install the package and run
the url :: /ponywhoosh (You may change it in the config) and get the results.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>Results: The results are sent to the template using bootstrap. 
They are renderized using whether a grid or a table, depending on what 
models did you register. By default the first field registered is considered
the one that will be contained in the tittle of each searh result.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flask_ponywhoosh.SearchForm">
<em class="property">class </em><code class="descclassname">flask_ponywhoosh.</code><code class="descname">SearchForm</code><span class="sig-paren">(</span><em>formdata=&lt;class flask_wtf.form._Auto&gt;</em>, <em>obj=None</em>, <em>prefix=''</em>, <em>csrf_context=None</em>, <em>secret_key=None</em>, <em>csrf_enabled=None</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.SearchForm" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the searching form that we will be use to make our search engine website.</p>
<dl class="docutils">
<dt>Attributes:</dt>
<dd>except_field (StringField): Fields you do not want to include in the search results.
fields (StringField): Fields, separated by comma,  where you want to search. 
models (StringField): Models, separated by comma, where you want to search. 
query (StringField): What you want to search. 
something (BooleanField): Option to literal search first, but in case there are no results available, it performs a search with wild_cards. 
submit (SubmitField): Button to submit the form. 
wildcards (BooleanField): Checkbox</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="flask_ponywhoosh.Whoosh">
<em class="property">class </em><code class="descclassname">flask_ponywhoosh.</code><code class="descname">Whoosh</code><span class="sig-paren">(</span><em>app=None</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosh" title="Permalink to this definition">¶</a></dt>
<dd><p>A top level class that allows to register whoosheers.</p>
<dl class="docutils">
<dt>Attributes:</dt>
<dd>#.DEBUG (bool): Description
#.entities (dict): This is a dictionary to store entities from db.
#.index_path_root (str): this is the name where the folder of the whoosheers are going to be stored.
#.route (TYPE): This config let you set the route for the url to run the html template.
#.search_string_min_len (int): This item let you config the minimun string value possible to perform search. 
#.template_path (TYPE): Is the path where the folder of templates will be store. 
#.writer_timeout (int): Is the time when the writer should stop the searching.</dd>
</dl>
<dl class="method">
<dt id="flask_ponywhoosh.Whoosh.create_index">
<code class="descname">create_index</code><span class="sig-paren">(</span><em>wh</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosh.create_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates and opens index for given whoosheer.</p>
<p>If the index already exists, it just opens it, otherwise it creates it first.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>wh (TYPE): All the whoosheers stored.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosh.delete_whoosheers">
<code class="descname">delete_whoosheers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosh.delete_whoosheers" title="Permalink to this definition">¶</a></dt>
<dd><p>This set to empty all the whosheers registered.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>TYPE: This empty all the whoosheers.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosh.init_app">
<code class="descname">init_app</code><span class="sig-paren">(</span><em>app</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosh.init_app" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the App.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>app (TYPE): Description</dd>
<dt>Returns:</dt>
<dd>TYPE: Description</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosh.register_model">
<code class="descname">register_model</code><span class="sig-paren">(</span><em>*index_fields</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosh.register_model" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a single model for fulltext search. This basically creates
a simple Whoosheer for the model and calls self.register_whoosheer on it.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><a href="#id1"><span class="problematic" id="id2">*</span></a>index_fields: all the fields indexed from the model. 
<a href="#id3"><span class="problematic" id="id4">**</span></a>kw: The options for each field, sortedby, stored...</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosh.register_whoosheer">
<code class="descname">register_whoosheer</code><span class="sig-paren">(</span><em>wh</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosh.register_whoosheer" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers a given whoosheer:</p>
<ul class="simple">
<li>Creates and opens an index for it (if it doesn&#8217;t exist yet)</li>
<li>Sets some default values on it (unless they&#8217;re already set)</li>
<li>Replaces query class of every whoosheer&#8217;s model by WhoosheeQuery</li>
</ul>
<dl class="docutils">
<dt>Args:</dt>
<dd>wh (TYPE): Description</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosh.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>*arg</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosh.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search function. This allows you to search using the following arguments.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><a href="#id5"><span class="problematic" id="id6">*</span></a>arg: The search string. 
<a href="#id7"><span class="problematic" id="id8">**</span></a>kw: The options available for searching: include_entity, add_wildcards, something, 
fields, except_fields, etc. These options were described previously.</dd>
<dt>Returns:</dt>
<dd>TYPE: Description</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosh.whoosheers">
<code class="descname">whoosheers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosh.whoosheers" title="Permalink to this definition">¶</a></dt>
<dd><p>Summary</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>TYPE: This returns all the whoosheers items stored.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="flask_ponywhoosh.Whoosheer">
<em class="property">class </em><code class="descclassname">flask_ponywhoosh.</code><code class="descname">Whoosheer</code><span class="sig-paren">(</span><em>wh</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer" title="Permalink to this definition">¶</a></dt>
<dd><p>A top lev....</p>
<dl class="docutils">
<dt>Attributes:</dt>
<dd>DEBUG (bool): Activates debugin. 
parameters (dict): Is a dictionary that contains parameters to manage the whoosheer object.
* limit: 
*  Optimize: This option indexes all the documents again to improve search runtime. However 
having the index optimizing everytime a new document is added may cause to register documents way too slow. 
* reverse= This option changes de order in which the documents are shown in the search results object.
*  scored: This option adds a boost in the column, giving it more importance when searching is performed. 
*  sortedby: This option let you decide the order based in a specific column. For example, price, age, etc.</dd>
</dl>
<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.add_field">
<code class="descname">add_field</code><span class="sig-paren">(</span><em>fieldname</em>, <em>fieldspec=&lt;class 'whoosh.fields.TEXT'&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.add_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Field</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>fieldname (Text): This parameters register a new field in specified model.
fieldspec (Name, optional): This option adds various options as were described before.</dd>
<dt>Returns:</dt>
<dd>TYPE: The new schema after deleted is returned.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.charge_documents">
<code class="descname">charge_documents</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.charge_documents" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>This method allow you to charge documents you already have </dt>
<dd>in your database. In this way an Index would be created according to 
the model and fields registered.</dd>
<dt>Returns:</dt>
<dd>An index updated with new documents.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.counts">
<code class="descname">counts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.counts" title="Permalink to this definition">¶</a></dt>
<dd><p>This method counts all the documents contained in  a certain registered model.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>Int: A number with all the documents a model have.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.delete_documents">
<code class="descname">delete_documents</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.delete_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes all the  documents using the  pk associated to them.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>The new index with the document deleted.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.delete_field">
<code class="descname">delete_field</code><span class="sig-paren">(</span><em>field_name</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.delete_field" title="Permalink to this definition">¶</a></dt>
<dd><p>This function deletes one determined field using the command MODEL.wh.delete_field(FIELD)</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>field_name (string): This argument let you delete some field for some model registered in the whoosheer.</dd>
<dt>Returns:</dt>
<dd>INDEX: The new schema after deleted is returned.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.optimize">
<code class="descname">optimize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.optimize" title="Permalink to this definition">¶</a></dt>
<dd><p>The index is reindexed, optimizing the run time of searchings and space used. Everytime a document is added a new file would be created, but optimizing would reduce all to just one.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>TYPE: Index optimized.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.parse_opts_searcher">
<code class="descname">parse_opts_searcher</code><span class="sig-paren">(</span><em>opts</em>, <em>parameters</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.parse_opts_searcher" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Args:</dt>
<dd>opts (Args): it takes the opts saved on the search object 
parameters (TYPE): Takes care that the opts are actually parameters available for the search.</dd>
<dt>Returns:</dt>
<dd>TYPE: Description</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.prep_search_string">
<code class="descname">prep_search_string</code><span class="sig-paren">(</span><em>search_string</em>, <em>add_wildcards=False</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.prep_search_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Prepares search string as a proper whoosh search string.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>search_string (str): it prepares the search string and see if the lenght is correct. 
add_wildcards (bool, optional): It runs a query for inexact queries.</dd>
<dt>Raises:</dt>
<dd>ValueError: When the search string does not have the appropriate lenght. This lenght 
may be changed in the config options.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>search_string</em>, <em>**opt</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.search" title="Permalink to this definition">¶</a></dt>
<dd><p>The core function of the package. These are the arguments we consider.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>search_string (str): This is what you are looking for in your pony database. 
<a href="#id9"><span class="problematic" id="id10">**</span></a>opt: The following opts are available for the search function: 
* add_wildcars(bool): This opt allows you to search no literal queries. 
* fields: This opt let you filter your search result on some model by the fields you want to search.
* include_entity: This opt let you see not only the result and the register fields but all the instance from the entity of the database. 
* except_fields: Tell the searcher to not look on these fields. 
* use_dict: This option let you activate the dict for the items in the search result, or just view them as a list. 
We implement this because we wanted that the  first field registered of the model would be the most important one. 
As was explained in the IndexView section.</dd>
<dt>Returns:</dt>
<dd>TYPE: Description</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.to_bool">
<code class="descname">to_bool</code><span class="sig-paren">(</span><em>v</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.to_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>to bool.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>v (TYPE): This takes some of the commonly used bool declaratories like, True, true, v, t , y or yes and converted in to just one. Avoiding int .</dd>
<dt>Returns:</dt>
<dd>TYPE: It returns a bool field.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="flask_ponywhoosh.Whoosheer.update_documents">
<code class="descname">update_documents</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.Whoosheer.update_documents" title="Permalink to this definition">¶</a></dt>
<dd><p>It deletes all the documents in the index and charge them again.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>Index: with updated documents</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="flask_ponywhoosh.delete_field">
<code class="descclassname">flask_ponywhoosh.</code><code class="descname">delete_field</code><span class="sig-paren">(</span><em>model</em>, <em>*arg</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.delete_field" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete_field</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>model (TYPE): Is the model from where you want to delete an specific field. 
<a href="#id11"><span class="problematic" id="id12">*</span></a>arg: Fiedls.</dd>
<dt>Returns:</dt>
<dd>TYPE: model without the desired field.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flask_ponywhoosh.full_search">
<code class="descclassname">flask_ponywhoosh.</code><code class="descname">full_search</code><span class="sig-paren">(</span><em>wh</em>, <em>*arg</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.full_search" title="Permalink to this definition">¶</a></dt>
<dd><p>This function search in every model registered. And portrays the result in a dictionary where the keys are the models.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>wh (Whoosheer): This is where all the whoosheers are stored. 
<a href="#id13"><span class="problematic" id="id14">*</span></a>arg: The search string. 
<a href="#id15"><span class="problematic" id="id16">**</span></a>kw: The options available for a single search wildcards, something, fields, models, etc.</dd>
<dt>Returns:</dt>
<dd>TYPE: Dictionary with all the the results for the models.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="flask_ponywhoosh.search">
<code class="descclassname">flask_ponywhoosh.</code><code class="descname">search</code><span class="sig-paren">(</span><em>model</em>, <em>*arg</em>, <em>**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#flask_ponywhoosh.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Summary</p>
<dl class="docutils">
<dt>Args:</dt>
<dd>model (TYPE): Description
<a href="#id17"><span class="problematic" id="id18">*</span></a>arg: Description
<a href="#id19"><span class="problematic" id="id20">**</span></a>kw: Description</dd>
<dt>Returns:</dt>
<dd>TYPE: Description</dd>
</dl>
</dd></dl>

</div>
<p>Or you can take a look in the &#8216;<a class="reference external" href="http://localhost:5000/ponywhoosh">http://localhost:5000/ponywhoosh</a>&#8216;. That performs a full_search in all the whoosheers.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to Flask-PonyWhoosh&#8217;s documentation!</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#what-s-new-0-1-6">What&#8217;s new? 0.1.6</a></li>
<li><a class="reference internal" href="#flask-settings">Flask Settings</a></li>
<li><a class="reference internal" href="#searching">Searching</a><ul>
<li><a class="reference internal" href="#searching-by-field">Searching by field:</a></li>
<li><a class="reference internal" href="#the-arguments-add-wildcards-and-something">The arguments <code class="docutils literal"><span class="pre">add_wildcards</span></code> and <code class="docutils literal"><span class="pre">something</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-results-dictionary">The results dictionary</a></li>
<li><a class="reference internal" href="#full-search-function">Full Search Function</a></li>
<li><a class="reference internal" href="#the-method-ponymodel-wh">The method <code class="docutils literal"><span class="pre">PonyModel._wh_.</span></code></a></li>
<li><a class="reference internal" href="#bonus-ponywhoosh">Bonus:/ponywhoosh !</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#app-full-example">App Full Example</a><ul>
<li><a class="reference internal" href="#running-the-app">Running the App</a></li>
<li><a class="reference internal" href="#running-the-app-example">Running the app example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-flask_ponywhoosh">API</a><ul>
<li><a class="reference internal" href="#flask-ponywhoosh-extension">flask_ponywhoosh extension</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Jonathan S. Prieto C. & Ivan Felipe Rodriguez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/index.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>