
{%extends "ponywhoosh/base.html"%}
{% import "bootstrap/wtf.html" as wtf %} 
{% block title %}Flask-PonyWhoosh{% endblock %}
{% block page_content %}

<div class="page-header">
	<h1>Welcome to Flask-Ponywhoosh</h1>
</div>


<form method="POST" action="/ponywhoosh">
	{{ form.hidden_tag() }}
	<div>{{form.query.label}}:{{form.query(class="css_class")}}
	</div>
	<div> 
		{{form.models.label}}: {{form.models(class= "css_class")}}
		{{form.fields.label}}:{{form.fields(class= "css_class")}}
		{{form.except_field.label}}:{{form.except_field(class= "css_class")}}
	</div>
	<div> 
		{{form.wildcards.label}}:{{form.wildcards(class= "css_class")}}
	
		{{form.something.label}}:{{form.something(class= "css_class")}}
	</div>
	 
		<input type="submit" value="Search">
	
</form>

<ul class="Results">
<h2>Results <small> {{results['runtime']}} seg</small></h2>
<!-- <br>
Matched Terms

	 {% for labelName, content in results['matched_terms'].iteritems() %}
		<ol class="breadcrumb">
		  <li><a href="#">{{labelName}}</a></li>
		  {% for pp in content %}
		  	<li> {{pp}} </a>
		  {% endfor %}
		</ol>
	  {% endfor %}
 -->

{%for l in labels%}
{%if results["results"][l]["items"] != []%}
<div class="row">
<h3>{{l}}</h3>

	{% for  result  in results["results"][l]["items"] %}
	<div class="col-xs-12 col-md-3">
		<div class="thumbnail">
			<div class="caption">
				<h3><a href="">{{result['entity'][0][1]}}</a> <small>{{result['entity'][0][0]}}</small></h3>
				
				{%for s in results["results"][l]["items"][0]["entity"][1:] %}
				<p>{{s[0]}}:  {{s[1]}}</p>
				{%endfor%}
				
				<a href="#seccion-{{result['model']}}-{{result['docnum']}}" class="btn btn-success btn-cen" data-toggle="collapse">Leer mas</a>
				<div class="collapse" id="seccion-{{result['model']}}-{{result['docnum']}}">
					<br>
					<div class="well">
					{%for s in results["results"][l]["items"][0]["other_fields"] %}
						<p>{{s[0]}}:  {{s[1]}}</p>
					{%endfor%}
					</div>
				</div>
			</div>

		</div>
	</div>
	{%endfor%}
</div>

{%endif%}

{%endfor%}

{% endblock %}
