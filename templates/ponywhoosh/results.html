
{%extends "ponywhoosh/base.html"%}
{% import "bootstrap/wtf.html" as wtf %} 
{% block title %}Flasky{% endblock %}
{% block page_content %}
<div class="page-header">
	<h1>Welcome to Flask-Ponywhoosh</h1>
</div>

<div class="page-header">
	<h1>Search</h1>
</div>
<form method="POST" action="/ponywhoosh">
	{{ form.hidden_tag() }}
	<div>{{form.query.label}}:{{form.query(class="css_class")}}</div>
	<div>
		{{form.models.label}} : {{form.models(class= "css_class")}}
	</div>
	<div> 
		{{form.fields.label}}:{{form.fields(class= "css_class")}}
	</div>
	<div> 
		{{form.except_field.label}}:{{form.except_field(class= "css_class")}}
	</div>
	<div> 
		{{form.wildcards.label}}:{{form.wildcards(class= "css_class")}}
	</div>
	<div> 
		{{form.something.label}}:{{form.something(class= "css_class")}}
	</div>
	 
		<input type="submit" value="Go">
	
</form>

<ul class="Results">
<h1>Results</h1>
<br>
<table class="table">
<td><th>Matched Terms</th>
<td>{{results['matched_terms']}}</td></td>
<td><th>runtime</th></td>
<td>{{results['runtime']}}</td>
</table>
<br>
{%for l in labels%}
{%if results["results"][l]["items"] != []%}
<h3>{{l}}</h3>
			<table class="table">
						{%for s in results["results"][l]["items"][0]["entity"].keys() %}
								<th>{{s}}</th>
						{%endfor%}
						
							<tr>	
							{% for  result  in results["results"][l]["items"] %}
							<tr>
							{%for s in results["results"][l]["items"][0]["entity"].keys() %}
							{%with%}
								{%set r=result['entity']%}
								<td>{{r[s]}}</td>
							{%endwith%}
							{% endfor %}
								</tr>
							{%endfor%}
							</tr>
						
				
				
				{%endif%}
				

			</table>

{%endfor%}

</ul>
{% endblock %}
